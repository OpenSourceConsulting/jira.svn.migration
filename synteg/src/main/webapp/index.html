<!DOCTYPE html>
<html lang="en-us">
<head>
<meta charset="utf-8">
<title>Subversion Migration - Dashboard</title>
<meta name="description" content="">
<meta name="author" content="">

<meta name="viewport"
	content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<!-- #CSS Links -->
<!-- Basic Styles -->
<link rel="stylesheet" type="text/css" media="screen"
	href="resources/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" media="screen"
	href="resources/css/font-awesome.min.css">

<!-- SmartAdmin Styles : Caution! DO NOT change the order -->
<link rel="stylesheet" type="text/css" media="screen"
	href="resources/css/smartadmin-production-plugins.min.css">
<link rel="stylesheet" type="text/css" media="screen"
	href="resources/css/smartadmin-production.min.css">
<link rel="stylesheet" type="text/css" media="screen"
	href="resources/css/smartadmin-skins.min.css">

<!-- We recommend you use "your_style.css" to override SmartAdmin
		specific styles this will also ensure you retrain your customization with each SmartAdmin update.
		<link rel="stylesheet" type="text/css" media="screen" href="css/your_style.css"> -->

<!-- #FAVICONS -->
<link rel="shortcut icon" href="resources/img/favicon.png"
	type="image/x-icon">
<link rel="icon" href="resources/img/favicon.png" type="image/x-icon">
<body class="">

	<!-- HEADER -->
	<header id="header">
		<div id="logo-group">
			<!-- PLACE YOUR LOGO HERE -->
			<span id="logo"> <img src="resources/img/osc-logo.png"
				alt="SmartAdmin">
			</span>
			<!-- END LOGO PLACEHOLDER -->
		</div>

	</header>
	<!-- END HEADER -->

	<!-- Left panel : Navigation area -->
	<!-- Note: This width of the aside area can be adjusted through LESS variables -->
	<aside id="left-panel">
		<nav>
			<ul>
				<li><a href="/svninteg/" title="Dashboard"><i
						class="fa fa-lg fa-fw fa-home"></i> <span class="menu-item-parent">Dashboard</span></a>
				</li>
				<li><a href="/svninteg/svnupload.html" title="Dashboard"><i
						class="fa fa-lg fa-fw fa-cloud-upload"></i> <span
						class="menu-item-parent">SVN Upload</span></a></li>

			</ul>
		</nav>
	</aside>
	<!-- END NAVIGATION -->

	<!-- MAIN PANEL -->
	<div id="main" role="main">

		<!-- MAIN CONTENT -->
		<div id="content">

			<!-- row -->
			<div class="row">
				<!-- col -->
				<div class="col-xs-12 col-sm-7 col-md-7 col-lg-4">
					<h1 class="page-title txt-color-blueDark">
						<!-- PAGE HEADER -->
						<i class="fa-fw fa fa-home"></i> Dashboard
					</h1>
				</div>
				<!-- end col -->
			</div>
			<!-- end col -->
			<!-- widget grid -->
			<section id="widget-grid">

				<!-- row -->
				<div class="row">
					<article class="col-md-offset-2 col-md-8 col-lg-8">
						<div class="jarviswidget" id="wid-id-0"
							data-widget-colorbutton="false" data-widget-editbutton="false"
							data-widget-custombutton="false">
							<div>
								<div class="widget-body">
									<form class="smart-form">
										<fieldset>
											<div class="row">
												<section class="col col-4">
													<label class="label">Project <span style="color:red;">(*)</span></label> <label class="select">
														<select id="projectList"></select> <i></i>
													</label>
												</section>
											<section class="col col-2">
												<label class="label">Date Field </label> <label class="select">
														<select id="dateField">
															<option value="created">Created</option>
															<option value="due">Due date</option>
															<option value="lastViewed">Last viewed</option>
															<option value="resolved">Resolved</option>
															<option value="updated">Updated</option>
														</select> <i></i>
													</label>
											</section>
											<section class="col col-2">
													<label class="label">From</label> <label class="input">
														<i class="icon-append fa fa-calendar"></i> <input
														type="text" name="fromdate" id="fromdate"
														placeholder="From">
													</label>
												</section>
												<section class="col col-2">
													<label class="label">To</label> <label class="input">
														<i class="icon-append fa fa-calendar"></i> <input
														type="text" name="todate" id="todate" placeholder="To">
													</label>
												</section>
											</div>
											<div class="row">
												<section class="col col-10">
													<label class="label">Status</label> 
													<div class="inline-group" id="statusList">
													</div>
												</section>
												
											</div>
										</fieldset>
										<footer>
											<button id="btnIssueFilter" class="btn btn-primary">Filter</button>
										</footer>
									</form>
								</div>
							</div>
						</div>
					</article>
					<!-- NEW WIDGET START -->
					<article class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
						<table id="issueList"></table>
						<div id="pjqgrid"></div>
						<br>
						<button id="exportBtn" class="btn btn-primary fa fa-download">
							&nbsp;Export Selected Issues</button>
					</article>
					<!-- WIDGET END -->

				</div>

				<!-- end row -->

			</section>
			<!-- end widget grid -->
		</div>
		<!-- main content -->

	</div>
	<!-- END MAIN PANEL -->

	<!-- PAGE FOOTER -->
	<div class="page-footer">
		<div class="row">
			<div class="col-xs-12 col-sm-6 text-right">
				<span class="txt-color-white">Jira SVN Integration 1.0 </span>
			</div>

		</div>
	</div>
	<!-- END PAGE FOOTER -->

	<!-- PACE LOADER - turn this on if you want ajax loading to show (caution: uses lots of memory on iDevices)-->
	<script data-pace-options='{ "restartOnRequestAfter": true }'
		src="resources/js/plugin/pace/pace.min.js"></script>

	<script src="resources/js/jquery-2.1.1.min.js"></script>
	<script src="resources/js/jquery-ui.min.js"></script>
	<!-- BOOTSTRAP JS -->
	<script src="resources/js/bootstrap/bootstrap.min.js"></script>
	<!-- JARVIS WIDGETS -->
	<script src="resources/js/smartwidgets/jarvis.widget.min.js"></script>
	<!-- JQUERY VALIDATE -->
	<script
		src="resources/js/plugin/jquery-validate/jquery.validate.min.js"></script>

	<!-- JQUERY SELECT2 INPUT -->
	<script src="resources/js/plugin/select2/select2.min.js"></script>

	<!-- browser msie issue fix -->
	<script src="resources/js/plugin/msie-fix/jquery.mb.browser.min.js"></script>
	<!-- PAGE RELATED PLUGIN(S) -->
	<script src="resources/js/plugin/jquery-form/jquery-form.min.js"></script>
	<!--[if IE 8]>

		<h1>Your browser is out of date, please update your browser by going to www.microsoft.com/download</h1>

		<![endif]-->

	<script src="resources/js/plugin/jqgrid/jquery.jqGrid.min.js"></script>
	<script src="resources/js/plugin/jqgrid/grid.locale-en.min.js"></script>
	<script src="resources/js/jira.svn.js"></script>

	<script type="text/javascript">
		$(document)
				.ready(
						function() {
							getProjectList("projectList");
							getStatusList("statusList")
							// START AND FINISH DATE
							$('#fromdate')
									.datepicker(
											{
												dateFormat : 'yy/mm/dd',
												prevText : '<i class="fa fa-chevron-left"></i>',
												nextText : '<i class="fa fa-chevron-right"></i>',
												onSelect : function(
														selectedDate) {
													$('#todate').datepicker(
															'option',
															'minDate',
															selectedDate);
												}
											});

							$('#todate')
									.datepicker(
											{
												dateFormat : 'yy/mm/dd',
												prevText : '<i class="fa fa-chevron-left"></i>',
												nextText : '<i class="fa fa-chevron-right"></i>',
												onSelect : function(
														selectedDate) {
													$('#fromdate').datepicker(
															'option',
															'maxDate',
															selectedDate);
												}
											});

							jQuery("#issueList")
									.jqGrid(
											{
												shrinkToFit : true,
												datatype : "local",
												height : 'auto',
												colNames : [ 'Key', 'Summary',
														'Created Date',
														'Last Updated',
														'Status', 'Commits',
														'Actions' ],
												colModel : [ {
													name : 'key',
													index : 'key',
													width : 20
												}, {
													name : 'summary',
													index : 'summary',
													formatter : showJiraLink
												}, {
													name : 'created',
													index : 'created',
													width : 50
												}, {
													name : 'last_updated',
													index : 'last_updated',
													width : 50
												}, {
													name : 'status',
													index : 'status',
													width : 20
												}, {
													name : 'commits',
													index : 'commits',
												}, {
													name : 'act',
													index : 'act',
													width : 15,
													align : 'center'
												} ],
												rowNum : 10,
												pager : '#pjqgrid',
												sortname : 'key',
												toolbarfilter : true,
												viewrecords : true,
												sortorder : "asc",
												editurl : "dummy.html",
												caption : "Jira issues",
												multiselect : true,
												autowidth : true,
												gridComplete : function() {
													var ids = jQuery(
															"#issueList")
															.jqGrid(
																	'getDataIDs');
													for (var i = 0; i < ids.length; i++) {
														se = "<button class='btn btn-xs btn-default' data-original-title='Download' onclick=\"exportSourceCode(["
																+ ids[i]
																+ "])\"><i class='fa fa-download'></i></button>";
														jQuery("#issueList")
																.jqGrid(
																		'setRowData',
																		ids[i],
																		{
																			act : se
																		});
													}
												}
											});

							/* Add tooltips */
							$('.navtable .ui-pg-button').tooltip({
								container : 'body'
							});

							//export multiple issues
							jQuery("#exportBtn").click(
									function() {
										var ids = jQuery("#issueList").jqGrid(
												'getGridParam', 'selarrrow');
										exportSourceCode(ids);
									});

							// 						
							// remove classes

							$(".ui-jqgrid").removeClass(
									"ui-widget ui-widget-content");
							$(".ui-jqgrid-view").children().removeClass(
									"ui-widget-header ui-state-default");
							$(".ui-jqgrid-labels, .ui-search-toolbar")
									.children()
									.removeClass(
											"ui-state-default ui-th-column ui-th-ltr");
							$(".ui-jqgrid-pager").removeClass(
									"ui-state-default");
							$(".ui-jqgrid").removeClass("ui-widget-content");

							// add classes
							$(".ui-jqgrid-htable").addClass(
									"table table-bordered table-hover");
							$(".ui-jqgrid-btable").addClass(
									"table table-bordered table-striped");

							$(".ui-pg-div").removeClass().addClass(
									"btn btn-sm btn-primary");
							$(".ui-icon.ui-icon-plus").removeClass().addClass(
									"fa fa-plus");

							$(".ui-icon.ui-icon-seek-prev")
									.wrap(
											"<div class='btn btn-sm btn-default'></div>");
							$(".ui-icon.ui-icon-seek-prev").removeClass()
									.addClass("fa fa-backward");

							$(".ui-icon.ui-icon-seek-first")
									.wrap(
											"<div class='btn btn-sm btn-default'></div>");
							$(".ui-icon.ui-icon-seek-first").removeClass()
									.addClass("fa fa-fast-backward");

							$(".ui-icon.ui-icon-seek-next")
									.wrap(
											"<div class='btn btn-sm btn-default'></div>");
							$(".ui-icon.ui-icon-seek-next").removeClass()
									.addClass("fa fa-forward");

							$(".ui-icon.ui-icon-seek-end")
									.wrap(
											"<div class='btn btn-sm btn-default'></div>");
							$(".ui-icon.ui-icon-seek-end").removeClass()
									.addClass("fa fa-fast-forward");
							//filter click
							$("#btnIssueFilter")
									.click(
											function(e) {
												//reset list
												$("#issueList").jqGrid(
														'clearGridData');
												var projectId = $(
														"#projectList").val();
												var fromDate = $("#fromdate")
														.val();
												var toDate = $("#todate").val();
												//get status from checkboxes
												var statuses = $('#statusList > label > input[name="checkbox-inline[]"]:checked').map(function() {
												    return this.value;
												}).get();
												if(statuses===""){
													statuses = null;
												}
												var dateFieldType = $("#dateField").val();
												var fields = "id,key,summary,created,updated,status";
												filterIssues("issueList",
														projectId, fromDate,
														toDate, statuses,dateFieldType, fields);
												e.preventDefault();
											});
						});

		$(window).on('resize.jqGrid', function() {
			$("#issueList").jqGrid('setGridWidth', $("#content").width());
		})
	</script>
	<div id="message" title="Warning"></div>
</body>

</html>